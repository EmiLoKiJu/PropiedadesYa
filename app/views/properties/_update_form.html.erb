<%= form_with model: @property do |f| %>
  <div class="d-flex flex-row">
    <div>
      <div>
        <%= f.text_field :title, placeholder: "title" %>
      </div>

      <div>
        <%= f.label :rent %>
        <%= f.check_box :rent %>
      </div>

      <div>
        <%= f.label :price %>
        <%= f.number_field :price, step: "any", placeholder: "price" %>
      </div>

      <div>
        <%= f.label :dollars %>
        <%= f.check_box :dollars %>
      </div>

      <div>
        <%= f.label :commune_id %>
        <%= f.collection_select :commune_id, Commune.order(:name), :id, :name, placeholder: "Commune" %>
      </div>

      <div>
        <%= f.text_field :address, placeholder: "Address" %>
      </div>

      <div>
        <%= f.label :area %>
        <%= f.number_field :area, placeholder: "Area" %>
      </div>

      <div>
        <%= f.label :rooms %>
        <%= f.number_field :rooms, placeholder: "Rooms" %>
      </div>

      <div>
        <%= f.label :bathrooms %>
        <%= f.number_field :bathrooms, placeholder: "Bathrooms" %>
      </div>

      <div>
        <%= f.text_area :description, placeholder: "Description" %>
      </div>

      <div>
        <%= f.label :pictures %>
        <% @property.pictures.each do |picture| %>
          <%= f.hidden_field :pictures, multiple: true, value: picture.signed_id %>
        <% end %>
        <%= f.file_field :pictures, multiple: true %> 
      </div>
    </div>
    <div>
      <p>Fotos:</p>
      <br />
      <div class="d-flex flex-wrap justify-content-start gap-2">
        <% property.pictures.each do |picture| %>
          <div>
            <%= link_to image_tag(property.make_thumbnail(picture)), picture %>
          </div>
        <% end %>
      </div>
      <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModal<%= property.id %>">
        Editar Fotos
      </button>
      <div class="modal fade" id="exampleModal<%= property.id %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Borrar fotos</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <% property.pictures.each do |picture| %>
                <div>
                  <%= link_to image_tag(property.make_thumbnail(picture)), picture %>
                  <%= link_to "borrar foto", purge_attachment_path(picture) %>
                </div>
              <% end %>
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="login-button">
    <%= f.submit "Guardar cambios" %>
  </div>
<% end %>